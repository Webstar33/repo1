SELECT `engine4_activity_actions`.*, (COUNT(engine4_activity_likes.like_id) + COUNT(engine4_core_likes.like_id) + COUNT(engine4_activity_comments.comment_id) + COUNT(engine4_core_comments.comment_id) ) AS `likes_count` FROM `engine4_activity_actions`
 LEFT JOIN `engine4_activity_likes` ON (engine4_activity_likes.resource_id = engine4_activity_actions.action_id AND engine4_activity_likes.creation_date > '2018-05-22') OR engine4_activity_likes.resource_id IS NULL
 LEFT JOIN `engine4_activity_comments` ON (engine4_activity_comments.resource_id = engine4_activity_actions.action_id AND engine4_activity_comments.creation_date > '2018-05-22') OR engine4_activity_comments.resource_id IS NULL
 LEFT JOIN `engine4_core_comments` ON ((engine4_core_comments.resource_id = engine4_activity_actions.object_id AND engine4_core_comments.resource_type = engine4_activity_actions.object_type AND engine4_core_comments.creation_date > '2018-05-22') OR engine4_core_comments.resource_id IS NULL)
 LEFT JOIN `engine4_core_likes` ON ((engine4_core_likes.resource_id = engine4_activity_actions.object_id AND engine4_core_likes.resource_type = engine4_activity_actions.object_type AND engine4_core_likes.creation_date > '2018-05-22') OR engine4_core_likes.resource_id IS NULL) WHERE (`engine4_activity_actions`.`action_id` IN(219,218,217,216,215,214,213,212,211,209,208,207,205,200,198,197,196,192,191,178,177,176,175,174,173,172,170,169,168,167,166,165,164,163,162,161,160,156,155,154,152,151,150,149,148,147,146,145,135,132,131,130,117,114,112,111,110,109,108,107,101,100,99,98,97,94,93,92,91,90,89,88,87,86,85,84,83,82,81,80,79,78,77,76,72,65,64,62,61,60,55,46,44,43,42,41,40,39,38,36,35,34,30,29,28,26,25,23,22,21,19,18,16,15,14,13,8,7,6,5,4,3,2,1)) GROUP BY `engine4_activity_actions`.`action_id` HAVING (likes_count > 0) ORDER BY `likes_count` DESC, `engine4_activity_actions`.`action_id` DESC LIMIT 150